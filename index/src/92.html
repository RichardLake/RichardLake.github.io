<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>c:\users\richard\documents\ckansplit\ckan-core\tests\ckan\types\moduleinstalldescriptor.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System.Collections.Generic;
using NUnit.Framework;
using Tests;

namespace CKANTests
{
    [TestFixture]
    public class ModuleInstallDescriptor
    {
        [Test]
        // NOTE: I&#39;ve *never* got these to fail. The problem I&#39;m trying to reproduce
        // seems to involve saving to the registry and back. It&#39;s now fixed in
        // JsonSingleOrArrayConverter.cs, but these tests remain, because tests are good.
        public void Null_Filters()
        {
            // We had a bug whereby we could end up with a filter list of a single null.
            // Make sure that doesn&#39;t happen ever again.

            // We want a module that doesn&#39;t specify filters.
            CKAN.CkanModule mod = TestData.kOS_014_module();

            test_filter(mod.install[0].filter, &quot;kOS/filter&quot;);
            test_filter(mod.install[0].filter_regexp, &quot;kOS/filter_regexp&quot;);

            // And Firespitter seems to trigger it.

            CKAN.CkanModule firespitter = TestData.FireSpitterModule();

            foreach (var stanza in firespitter.install)
            {
                test_filter(stanza.filter, &quot;Firespitter/filter&quot;);
                test_filter(stanza.filter_regexp, &quot;Firespitter/filter_regexp&quot;);
            }
        }

        private void test_filter(List&lt;string&gt; filter, string message)
        {
            if (filter != null)
            {
                Assert.IsFalse(filter.Contains(null), message);
            }
        }
    }
}


    </pre>
    <script type="text/javascript">
      highlightRanges([[15,9,15,10,1],[20,13,20,61,1],[22,13,22,62,1],[23,13,23,76,1],[27,13,27,72,1],[29,13,29,20,1],[29,36,29,55,1],[29,22,29,32,1],[30,13,30,14,1],[31,17,31,66,1],[32,17,32,80,1],[33,13,33,14,1],[29,33,29,35,1],[34,9,34,10,1],[37,9,37,10,1],[38,13,38,32,1],[39,13,39,14,1],[40,17,40,64,1],[41,13,41,14,1],[42,9,42,10,1]]);
    </script>
  </body>
</html>